<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/app_background">

    <!-- Header Background cố định (nếu muốn cuộn cùng nội dung thì đưa vào bên trong ScrollView như Profile) 
         Nhưng ở Cart, danh sách dài nên giữ Header cố định hoặc cuộn tuỳ ý. 
         Để đơn giản và giống Settings, ta để Header cuộn cùng nội dung nếu dùng ScrollView, 
         nhưng Cart dùng RecyclerView nên ta để Header cố định bên dưới. -->
    
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical">
        
        <FrameLayout
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1">

            <!-- Header Background -->
            <View
                android:layout_width="match_parent"
                android:layout_height="220dp"
                android:background="@drawable/bg_login_header" />

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical"
                android:paddingTop="70dp">

                <androidx.cardview.widget.CardView
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:layout_marginHorizontal="16dp"
                    android:layout_marginBottom="8dp"
                    app:cardCornerRadius="16dp"
                    app:cardElevation="4dp"
                    app:cardBackgroundColor="@color/surface">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:orientation="vertical">
                        
                        <com.google.android.material.button.MaterialButton
                            android:id="@+id/btn_view_orders"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginHorizontal="16dp"
                            android:layout_marginTop="16dp"
                            android:layout_marginBottom="8dp"
                            android:text="Đơn hàng đã đặt"
                            style="@style/Widget.MaterialComponents.Button.OutlinedButton"
                            android:textColor="@color/text_primary"
                            app:strokeColor="@color/accent"
                            app:strokeWidth="1dp"
                            app:cornerRadius="12dp"
                            app:icon="@drawable/ic_cart" 
                            app:iconTint="@color/accent"
                            app:iconGravity="textStart" />

                        <androidx.recyclerview.widget.RecyclerView
                            android:id="@+id/cart_recycler_view"
                            android:layout_width="match_parent"
                            android:layout_height="0dp"
                            android:layout_weight="1"
                            android:padding="8dp"
                            android:clipToPadding="false"/>
                    </LinearLayout>
                </androidx.cardview.widget.CardView>
            </LinearLayout>
        </FrameLayout>

        <!-- Bottom Payment Section -->
        <com.google.android.material.card.MaterialCardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            app:cardElevation="16dp"
            app:cardCornerRadius="24dp"
            android:layout_marginBottom="-10dp" 
            app:cardBackgroundColor="@color/surface">
            
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:padding="24dp"
                android:paddingBottom="32dp">
                
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal"
                    android:layout_marginBottom="16dp"
                    android:gravity="center_vertical">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Tổng cộng:"
                        android:textColor="@color/text_secondary"
                        android:textSize="16sp" />

                    <TextView
                        android:id="@+id/cart_total_price"
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:gravity="end"
                        android:textColor="@color/accent"
                        android:textSize="24sp"
                        android:textStyle="bold"
                        tools:text="1.250.000 VND" />
                </LinearLayout>

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/btn_proceed_to_payment"
                    android:layout_width="match_parent"
                    android:layout_height="56dp"
                    android:text="Tiến hành thanh toán"
                    android:textSize="16sp"
                    android:textStyle="bold"
                    android:textColor="@color/white"
                    app:cornerRadius="12dp"
                    app:backgroundTint="@color/accent"/>
                    
            </LinearLayout>
        </com.google.android.material.card.MaterialCardView>
    </LinearLayout>

    <!-- Toolbar (FIXED ON TOP) -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:gravity="center_vertical"
        android:padding="16dp"
        android:layout_marginTop="8dp"
        android:elevation="10dp"> 
        
        <ImageButton
            android:id="@+id/btn_back"
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:background="?attr/selectableItemBackgroundBorderless"
            android:src="@drawable/ic_arrow_back"
            app:tint="@android:color/white"
            android:padding="8dp"/>
            
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Giỏ hàng"
            android:textSize="20sp"
            android:textStyle="bold"
            android:textColor="@android:color/white"
            android:layout_marginStart="16dp"/>
    </LinearLayout>

</FrameLayout>